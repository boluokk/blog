<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Redis å­¦ä¹ ç¬”è®° | ğŸBlog</title><meta name="author" content="ğŸ"><meta name="copyright" content="ğŸ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ æœ¬åœ°ç¼“å­˜ Caffeine åº“   å¤šçº§ç¼“å­˜ Redis åˆ†å¸ƒå¼ç¼“å­˜ æ•°æ®ç±»å‹ å¸¸ç”¨æ“ä½œ Java æ“ä½œ Redis Spring Boot Redis Template Redisson   ä¸»ä»æ¨¡å‹æ­å»º å“¨å…µé›†ç¾¤æ­å»º æ—¥å¿—æŒä¹…åŒ–   ç¼“å­˜ï¼ˆRedisï¼‰åº”ç”¨åœºæ™¯ æ•°æ®å…±äº« å•ç‚¹ç™»å½• è®¡æ•°å™¨ é™æµ ç‚¹èµ å®æ—¶æ’è¡Œæ¦œ åˆ†å¸ƒå¼é”   ç¼“å­˜å¸¸è§é—®é¢˜ ç¼“å­˜é›ªå´© ç¼“å­˜å‡»ç©¿ ç¼“å­˜ç©¿é€ ç¼“å­˜æ›´æ–°">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis å­¦ä¹ ç¬”è®°">
<meta property="og:url" content="https://boluokk.github.io/blog/2023/05/23/Redis/index.html">
<meta property="og:site_name" content="ğŸBlog">
<meta property="og:description" content="ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ æœ¬åœ°ç¼“å­˜ Caffeine åº“   å¤šçº§ç¼“å­˜ Redis åˆ†å¸ƒå¼ç¼“å­˜ æ•°æ®ç±»å‹ å¸¸ç”¨æ“ä½œ Java æ“ä½œ Redis Spring Boot Redis Template Redisson   ä¸»ä»æ¨¡å‹æ­å»º å“¨å…µé›†ç¾¤æ­å»º æ—¥å¿—æŒä¹…åŒ–   ç¼“å­˜ï¼ˆRedisï¼‰åº”ç”¨åœºæ™¯ æ•°æ®å…±äº« å•ç‚¹ç™»å½• è®¡æ•°å™¨ é™æµ ç‚¹èµ å®æ—¶æ’è¡Œæ¦œ åˆ†å¸ƒå¼é”   ç¼“å­˜å¸¸è§é—®é¢˜ ç¼“å­˜é›ªå´© ç¼“å­˜å‡»ç©¿ ç¼“å­˜ç©¿é€ ç¼“å­˜æ›´æ–°">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://source.fomal.cc/img/default_cover_26.webp">
<meta property="article:published_time" content="2023-05-23T05:47:40.000Z">
<meta property="article:modified_time" content="2023-08-22T04:43:53.404Z">
<meta property="article:author" content="ğŸ">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://source.fomal.cc/img/default_cover_26.webp"><link rel="shortcut icon" href="/blog/img/favicon.png"><link rel="canonical" href="https://boluokk.github.io/blog/2023/05/23/Redis/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/blog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/blog/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Redis å­¦ä¹ ç¬”è®°',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2023-08-22 12:43:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://boluokk.github.io/blog/css/custom.css" media="defer" onload="this.media='all'"><script async src="https://boluokk.github.io/blog/js/fps.js"></script><script async src="https://boluokk.github.io/blog/js/title.js"></script><span id="fps"></span><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/css/runtime/runtime.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js/themes/blue/pace-theme-minimal.min.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/assets/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">20</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw icon-guidang1"></i><span> å½’æ¡£</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://source.fomal.cc/img/default_cover_26.webp')"><nav id="nav"><span id="blog-info"><a href="/blog/" title="ğŸBlog"><span class="site-name">ğŸBlog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/blog/"><i class="fa-fw icon-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/blog/archives/"><i class="fa-fw icon-guidang1"></i><span> å½’æ¡£</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Redis å­¦ä¹ ç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-05-23T05:47:40.000Z" title="å‘è¡¨äº 2023-05-23 13:47:40">2023-05-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2023-08-22T04:43:53.404Z" title="æ›´æ–°äº 2023-08-22 12:43:53">2023-08-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">6.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>26åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Redis å­¦ä¹ ç¬”è®°"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><ul>
<li>ä»€ä¹ˆæ˜¯ç¼“å­˜ï¼Ÿ</li>
<li>æœ¬åœ°ç¼“å­˜<ul>
<li>Caffeine åº“</li>
</ul>
</li>
<li>å¤šçº§ç¼“å­˜</li>
<li>Redis åˆ†å¸ƒå¼ç¼“å­˜<ul>
<li>æ•°æ®ç±»å‹</li>
<li>å¸¸ç”¨æ“ä½œ</li>
<li>Java æ“ä½œ Redis<ul>
<li>Spring Boot Redis Template</li>
<li>Redisson</li>
</ul>
</li>
<li>ä¸»ä»æ¨¡å‹æ­å»º</li>
<li>å“¨å…µé›†ç¾¤æ­å»º</li>
<li>æ—¥å¿—æŒä¹…åŒ–</li>
</ul>
</li>
<li>ç¼“å­˜ï¼ˆRedisï¼‰åº”ç”¨åœºæ™¯<ul>
<li>æ•°æ®å…±äº«</li>
<li>å•ç‚¹ç™»å½•</li>
<li>è®¡æ•°å™¨</li>
<li>é™æµ</li>
<li>ç‚¹èµ</li>
<li>å®æ—¶æ’è¡Œæ¦œ</li>
<li>åˆ†å¸ƒå¼é”</li>
</ul>
</li>
<li>ç¼“å­˜å¸¸è§é—®é¢˜<ul>
<li>ç¼“å­˜é›ªå´©</li>
<li>ç¼“å­˜å‡»ç©¿</li>
<li>ç¼“å­˜ç©¿é€</li>
<li>ç¼“å­˜æ›´æ–°ä¸€è‡´æ€§</li>
</ul>
</li>
</ul>
<h3 id="å®‰è£…æ•™ç¨‹"><a href="#å®‰è£…æ•™ç¨‹" class="headerlink" title="å®‰è£…æ•™ç¨‹"></a>å®‰è£…æ•™ç¨‹</h3><h4 id="1ã€å‡†å¤‡"><a href="#1ã€å‡†å¤‡" class="headerlink" title="1ã€å‡†å¤‡"></a>1ã€å‡†å¤‡</h4><p>å‡çº§gcc</p>
<p>1ã€å› ä¸ºredis-5ä»¥ä¸Šè¦ä½¿ç”¨gcc5.3ä»¥ä¸Šç‰ˆæœ¬è¿›è¡Œç¼–è¯‘ï¼Œä½†æ˜¯centos7é»˜è®¤å®‰è£…çš„gccç‰ˆæœ¬æ˜¯4.8.5ï¼Œæ‰€ä»¥éœ€è¦å‡çº§gccç‰ˆæœ¬ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603113339603.png" alt="image-20230603113339603"></p>
<p>å¦‚æœgccç‰ˆæœ¬è¿‡ä½ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šå‡ºé”™ï¼š</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603113412451.png" alt="image-20230603113412451"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å®‰è£…gcc</span></span><br><span class="line">yum -y install gcc tcl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹gccç‰ˆæœ¬æ˜¯å¦åœ¨5.3ä»¥ä¸Šï¼Œcentos7.6é»˜è®¤å®‰è£…4.8.5</span></span><br><span class="line">gcc -v</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡çº§åˆ°gcc 9.3ï¼š</span></span><br><span class="line">yum -y install centos-release-scl</span><br><span class="line">yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils</span><br><span class="line">scl enable devtoolset-9 bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éœ€è¦æ³¨æ„çš„æ˜¯sclå‘½ä»¤å¯ç”¨åªæ˜¯ä¸´æ—¶çš„ï¼Œé€€å‡ºshellæˆ–é‡å¯å°±ä¼šæ¢å¤åŸç³»ç»Ÿgccç‰ˆæœ¬ã€‚</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœè¦é•¿æœŸä½¿ç”¨gcc 9.3çš„è¯ï¼š</span></span><br><span class="line">echo -e &quot;\nsource /opt/rh/devtoolset-9/enable&quot; &gt;&gt;/etc/profile</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹gccç‰ˆæœ¬</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">[root@node01 ~]<span class="comment"># gcc -v</span></span> </span><br><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=gcc</span><br><span class="line">COLLECT_LTO_WRAPPER=/opt/rh/devtoolset-9/root/usr/libexec/gcc/x86_64-redhat-linux/9/lto-wrapper</span><br><span class="line">Target: x86_64-redhat-linux</span><br><span class="line">Configured with: ../configure --enable-bootstrap --enable-languages=c,c++,fortran,lto --prefix=/opt/rh/devtoolset-9/root/usr --mandir=/opt/rh/devtoolset-9/root/usr/share/man --infodir=/opt/rh/devtoolset-9/root/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-shared --enable-threads=posix --enable-checking=release --enable-multilib --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-gcc-major-version-only --with-linker-hash-style=gnu --with-default-libstdcxx-abi=gcc4-compatible --enable-plugin --enable-initfini-array --with-isl=/builddir/build/BUILD/gcc-9.3.1-20200408/obj-x86_64-redhat-linux/isl-install --disable-libmpx --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux</span><br><span class="line">Thread model: posix</span><br><span class="line">gcc version 9.3.1 20200408 (Red Hat 9.3.1-2) (GCC) </span><br></pre></td></tr></table></figure>

<h4 id="2ã€å®‰è£…Redis"><a href="#2ã€å®‰è£…Redis" class="headerlink" title="2ã€å®‰è£…Redis"></a>2ã€å®‰è£…Redis</h4><p>ä¸‹è½½å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½rediså®‰è£…åŒ…</span></span><br><span class="line">wget http://download.redis.io/releases/redis-6.2.5.tar.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§£å‹å®‰è£…åŒ…</span></span><br><span class="line">[root@node01 modules]# tar -zxvf redis-6.2.5.tar.gz</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®‰è£…åŒ…</span></span><br><span class="line">[root@node01 modules]# cd redis-6.2.5/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¯‘å’Œå®‰è£…</span></span><br><span class="line">make &amp;&amp; make test &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‡ºé”™ï¼Œæ‰§è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¯‘å‡ºé”™æ—¶ï¼Œæ¸…å‡ºç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶</span></span><br><span class="line">make distclean</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¸è½½</span></span><br><span class="line">make uninstall</span><br></pre></td></tr></table></figure>

<h4 id="3ã€é…ç½®"><a href="#3ã€é…ç½®" class="headerlink" title="3ã€é…ç½®"></a>3ã€é…ç½®</h4><p>1ã€å°†æœåŠ¡ç«¯è„šæœ¬å’Œå®¢æˆ·ç«¯è„šæœ¬ç§»åŠ¨åˆ°æ–°å»ºçš„æ–‡ä»¶å¤¹ä¸‹é¢</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨å®‰è£…ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª bin ç›®å½•</span></span><br><span class="line">[root@node01 redis-6.2.5]# mkdir bin</span><br><span class="line">[root@node01 redis-6.2.5]# cd src/</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† redis-server å’Œ redis-cli ç§»åŠ¨åˆ° bin ç›®å½•ä¸­</span></span><br><span class="line">[root@node01 src]# cp redis-server ../bin/</span><br><span class="line">[root@node01 src]# cp redis-cli ../bin/</span><br><span class="line"></span><br><span class="line">[root@node01 src]# cd ..</span><br><span class="line">[root@node01 redis-6.2.5]# ls</span><br><span class="line">00-RELEASENOTES  BUGS     CONTRIBUTING  deps     Makefile   README.md   runtest          runtest-moduleapi  sentinel.conf  tests   utils</span><br><span class="line">bin              CONDUCT  COPYING       INSTALL  MANIFESTO  redis.conf  runtest-cluster  runtest-sentinel   src            TLS.md</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°† redis çš„é…ç½®æ–‡ä»¶ redis.conf ç§»åŠ¨åˆ° bin ç›®å½•ä¸‹</span></span><br><span class="line">[root@node01 redis-6.2.5]# cp redis.conf bin/</span><br><span class="line">[root@node01 redis-6.2.5]# cd bin/</span><br><span class="line">[root@node01 bin]# ls</span><br><span class="line">redis-cli  redis.conf  redis-server</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹çš„å†…å®¹åœ¨ä¸‹é¢</span></span><br><span class="line">[root@node01 bin]# vim redis.conf </span><br><span class="line">[root@node01 bin]# ./redis-server redis.conf </span><br><span class="line">[root@node01 bin]# ./redis-cli </span><br><span class="line">127.0.0.1:6379&gt; set test hello </span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; get test </span><br><span class="line">&quot;hello&quot;</span><br></pre></td></tr></table></figure>

<p>2ã€é…ç½®redis.confæ–‡ä»¶</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®å¯ä»¥è®¿é—®redisæœåŠ¡çš„IP</span></span><br><span class="line">bind 0.0.0.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®redisçš„è®¿é—®ç«¯å£</span></span><br><span class="line">port 6379</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®è®¿é—®redisçš„å¯†ç </span></span><br><span class="line">requirepass 123456</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½® redis-server ä»¥å®ˆæŠ¤çº¿ç¨‹æ–¹å¼å¯åŠ¨</span></span><br><span class="line">daemonize yes</span><br></pre></td></tr></table></figure>

<p>3ã€å¯åŠ¨redisï¼Œç™»å½•æ•°æ®åº“</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ redis æœåŠ¡, åé¢åŠ  &amp; å‚æ•°åå°è¡¨ç¤ºå¯åŠ¨</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">REDIS_HOME/bin/redis-server redis.conf &amp;</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ redis è¿›ç¨‹æ˜¯å¦å¯åŠ¨</span></span><br><span class="line">[root@localhost bin]# ps -ef | grep redis </span><br><span class="line">root      85823  62546  0 23:54 pts/1    00:00:00 ./redis-server 0.0.0.0:6379</span><br><span class="line">root      85839  83082  0 23:55 pts/2    00:00:00 grep --color=auto redis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ redis çš„å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">REDIS_HOME/bin/redis-cli</span> </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç™»å½• redis</span></span><br><span class="line">auth [yourpassword]</span><br></pre></td></tr></table></figure>

<p>4ã€å¼€å¯è‡ªå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå¼€æœºè‡ªå¯åŠ¨è„šæœ¬çš„æ–‡ä»¶</span></span><br><span class="line">vim /etc/init.d/redis</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™å¼€æœºè‡ªå¯åŠ¨çš„è„šæœ¬ï¼Œ æ³¨æ„æ›¿æ¢è‡ªå·±çš„redisçš„å¯åŠ¨å‘½ä»¤çš„ä½ç½®ä»¥åŠé…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Configurations injected by install_server below....</span></span><br><span class="line"></span><br><span class="line">EXEC=/home/redis-6.2.6/bin/redis-server</span><br><span class="line">CLIEXEC=/home/redis-6.2.6/bin/redis-cli</span><br><span class="line">PIDFILE=/var/run/redis_6379.pid</span><br><span class="line">CONF=&quot;/home/redis-6.2.6/bin/redis.conf&quot;</span><br><span class="line">REDISPORT=&quot;6379&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##############</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">SysV Init Information</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">chkconfig: - 58 74</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">description: redis_6379 is the redis daemon.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## BEGIN INIT INFO</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Provides: redis_6379</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Required-Start: <span class="variable">$network</span> <span class="variable">$local_fs</span> <span class="variable">$remote_fs</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Required-Stop: <span class="variable">$network</span> <span class="variable">$local_fs</span> <span class="variable">$remote_fs</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Default-Start: 2 3 4 5</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Default-Stop: 0 1 6</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Should-Start: <span class="variable">$syslog</span> <span class="variable">$named</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Should-Stop: <span class="variable">$syslog</span> <span class="variable">$named</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Short-Description: start and stop redis_6379</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Description: Redis daemon</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## END INIT INFO</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">case &quot;$1&quot; in</span><br><span class="line">    start)</span><br><span class="line">        if [ -f $PIDFILE ]</span><br><span class="line">        then</span><br><span class="line">            echo &quot;$PIDFILE exists, process is already running or crashed&quot;</span><br><span class="line">        else</span><br><span class="line">            echo &quot;Starting Redis server...&quot;</span><br><span class="line">            # å¯åŠ¨ Redis</span><br><span class="line">            $EXEC $CONF</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">    stop)</span><br><span class="line">        if [ ! -f $PIDFILE ]</span><br><span class="line">        then</span><br><span class="line">            echo &quot;$PIDFILE does not exist, process is not running&quot;</span><br><span class="line">        else</span><br><span class="line">            PID=$(cat $PIDFILE)</span><br><span class="line">            echo &quot;Stopping ...&quot;</span><br><span class="line">            # $CLIEXEC -p $REDISPORT shutdown</span><br><span class="line">            # å¸¦æœ‰å¯†ç çš„rediså…³é—­æ–¹å¼ï¼š redis-cli -a 123456 shutdown </span><br><span class="line">            $CLIEXEC -a 123456 shutdown </span><br><span class="line">            while [ -x /proc/$&#123;PID&#125; ]</span><br><span class="line">            do</span><br><span class="line">                echo &quot;Waiting for Redis to shutdown ...&quot;</span><br><span class="line">                sleep 1</span><br><span class="line">            done</span><br><span class="line">            echo &quot;Redis stopped&quot;</span><br><span class="line">        fi</span><br><span class="line">        ;;</span><br><span class="line">    status)</span><br><span class="line">        if [ ! -f $PIDFILE ]</span><br><span class="line">        then</span><br><span class="line">             echo &#x27;Redis is not running&#x27;</span><br><span class="line">        else     </span><br><span class="line">             PID=$(cat $PIDFILE)</span><br><span class="line">             if [ ! -x /proc/$&#123;PID&#125; ]</span><br><span class="line">             then</span><br><span class="line">                 echo &#x27;Redis is not running&#x27;</span><br><span class="line">             else</span><br><span class="line">                 echo &quot;Redis is running ($PID)&quot;</span><br><span class="line">             fi</span><br><span class="line">        fi     </span><br><span class="line">        ;;</span><br><span class="line">    restart)</span><br><span class="line">        $0 stop</span><br><span class="line">        $0 start</span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        echo &quot;Please use start, stop, restart or status as first argument&quot;</span><br><span class="line">        ;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>

<p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºrediså¼€æœºå¯åŠ¨è„šæœ¬èµ‹äºˆæ‰§è¡Œæƒé™</span></span><br><span class="line">chmod +x /etc/init.d/redis</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å¯redisæœåŠ¡</span></span><br><span class="line">systemctl start redis </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹redisçš„çŠ¶æ€</span></span><br><span class="line">systemctl status redis </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢redisæœåŠ¡</span></span><br><span class="line">systemctl stop redis </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹redisæœåŠ¡çš„çŠ¶æ€</span></span><br><span class="line">systemctl status redis </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®rediså¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl enable redis </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ç¦æ­¢rediså¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl disable redis </span><br></pre></td></tr></table></figure>

<p>éœ€è¦å…³é—­é˜²ç«å¢™</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.é¦–å…ˆåˆ‡æ¢åˆ° rootï¼šsu -root</span><br><span class="line"></span><br><span class="line">2.è¿›å…¥ /bin ç›®å½•ï¼šcd /bin</span><br><span class="line"></span><br><span class="line">3.æ‰§è¡Œå‘½ä»¤ï¼šsystemctl stop firewalld.serviceï¼ˆå…³é—­é˜²ç«å¢™)</span><br><span class="line"></span><br><span class="line">                systemctl disable firewalld.serviceï¼ˆå…³é—­é˜²ç«å¢™è‡ªåŠ¨å¯åŠ¨ï¼‰</span><br><span class="line"></span><br><span class="line">4.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼šsystemctl status firewalld.serviceï¼ˆæŸ¥çœ‹é˜²ç«å¢™æœåŠ¡çŠ¶æ€ï¼‰</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ç»ƒä¹ å¯ç”¨dockerä»£æ›¿ğŸ‘ğŸ‘ğŸ‘</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auth å¯†ç </span><br></pre></td></tr></table></figure>



<h3 id="ä»€ä¹ˆæ˜¯ç¼“å­˜"><a href="#ä»€ä¹ˆæ˜¯ç¼“å­˜" class="headerlink" title="ä»€ä¹ˆæ˜¯ç¼“å­˜?"></a>ä»€ä¹ˆæ˜¯ç¼“å­˜?</h3><blockquote>
<p>ç¼“å­˜å°±æ˜¯æ•°æ®äº¤æ¢çš„ç¼“å†²åŒºï¼ˆç§°ä½œCacheï¼‰ï¼Œæ˜¯å­˜è´®æ•°æ®ï¼ˆä½¿ç”¨é¢‘ç¹çš„æ•°æ®ï¼‰çš„ä¸´æ—¶åœ°æ–¹ã€‚å½“ç”¨æˆ·æŸ¥è¯¢æ•°æ®ï¼Œé¦–å…ˆåœ¨ç¼“å­˜ä¸­å¯»æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†åˆ™ç›´æ¥æ‰§è¡Œã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™å»æ•°æ®åº“ä¸­æŸ¥æ‰¾ã€‚</p>
</blockquote>
<h3 id="å¸¸è§„æ“ä½œ"><a href="#å¸¸è§„æ“ä½œ" class="headerlink" title="å¸¸è§„æ“ä½œ"></a>å¸¸è§„æ“ä½œ</h3><blockquote>
<p>è¿™äº›æ•°æ®ç±»å‹éƒ½æ˜¯æ”¯æŒpush&#x2F;popã€add&#x2F;remove åŠäº¤é›†å¹¶é›†å’Œå·®é›†ï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„</p>
</blockquote>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><blockquote>
<p>Redisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºï¼ŒRedisä¼šå‘¨æœŸæ€§çš„å§æ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œè¿½åŠ åˆ°è®°å½•æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å®ç°(master-slave)ä¸»ä»åŒæ­¥ã€‚</p>
</blockquote>
<h3 id="å•çº¿ç¨‹-å¤šè·¯IOå¤ç”¨æŠ€æœ¯"><a href="#å•çº¿ç¨‹-å¤šè·¯IOå¤ç”¨æŠ€æœ¯" class="headerlink" title="å•çº¿ç¨‹+å¤šè·¯IOå¤ç”¨æŠ€æœ¯"></a>å•çº¿ç¨‹+å¤šè·¯IOå¤ç”¨æŠ€æœ¯</h3><blockquote>
<ol>
<li>redisæ˜¯å•çº¿ç¨‹+å¤šè·¯IOå¤ç”¨æŠ€æœ¯</li>
<li>å¤šè·¯å¤ç”¨æ˜¯æŒ‡ä¸€ä¸ªçº¿ç¨‹æ¥æ£€æŸ¥å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦(socket)çš„å°±ç»ªçŠ¶æ€ï¼Œæ¯”å¦‚è°ƒç”¨selectå’Œpollå‡½æ•°ï¼Œä¼ å…¥å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å°±ç»ªï¼Œåˆ™è¿”å›ï¼Œå¦åˆ™ç›´åˆ°è¶…æ—¶ã€‚</li>
</ol>
</blockquote>
<h3 id="æ•°æ®ç±»å‹æ“ä½œ"><a href="#æ•°æ®ç±»å‹æ“ä½œ" class="headerlink" title="æ•°æ®ç±»å‹æ“ä½œ"></a>æ•°æ®ç±»å‹æ“ä½œ</h3><h5 id="keyæ“ä½œ"><a href="#keyæ“ä½œ" class="headerlink" title="keyæ“ä½œ"></a>keyæ“ä½œ</h5><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">keys * æŸ¥çœ‹å½“å‰åº“æœ‰é‚£äº›Keys</span><br><span class="line">existe keyæ˜¯å¦å­˜åœ¨</span><br><span class="line">del key åˆ é™¤key</span><br><span class="line">type key keyæ˜¯ä»€ä¹ˆç±»å‹</span><br><span class="line">unlink key åˆ é™¤key(éé˜»å¡åˆ é™¤)</span><br><span class="line">expire key è®¾ç½®keyè¿‡æœŸæ—¶é—´</span><br><span class="line">ttl key æŸ¥çœ‹å¤šä¹…è¿‡æœŸ(-1è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ-2è¡¨ç¤ºå·²è¿‡æœŸ)</span><br><span class="line">select åˆ‡æ¢æ•°æ®åº“</span><br><span class="line">dbsize æŸ¥çœ‹å½“å‰æ•°æ®åº“keyçš„æ•°é‡</span><br><span class="line">flushdb æ¸…ç©ºå½“å‰æ•°æ®åº“</span><br><span class="line">flushall æ¸…ç©ºæ‰€æœ‰</span><br><span class="line"></span><br><span class="line">set è®¾ç½® key</span><br><span class="line">get è·å–key</span><br><span class="line">append æœ€ä½³å€¼</span><br><span class="line">strlen è·å–å€¼é•¿åº¦</span><br><span class="line">setnx åªæœ‰keyä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®keyçš„å€¼</span><br><span class="line">incr å°†keyä¸­å­˜å‚¨çš„æ•°å­—å¢åŠ 1(ä»…å¯¹æ•°å­—æ“ä½œ)</span><br><span class="line">decr å°†keyçš„å€¼å‡1</span><br><span class="line">incrby / decrby key æ­¥é•¿ å›ºå®šå¢åŠ å‡å°‘å¤šå°‘(æ­¥é•¿)</span><br><span class="line"></span><br><span class="line">mset <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">key2</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span> å¯è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">mget ... è·å–å¤šä¸ªå€¼</span><br><span class="line">msetnx åŒæ—¶è®¾ç½®å¤šä¸ªï¼Œä»…å¯¹ä¸å­˜åœ¨çš„key(æœ‰ä¸€ä¸ªkeyå­˜åœ¨ï¼Œåˆ™ä¼šå¤±è´¥)</span><br><span class="line">setex <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> &lt;è¿‡æœŸæ—¶é—´&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>è®¾ç½®è¿‡æœŸæ—¶é—´åŒæ—¶è®¾ç½®å€¼</span><br><span class="line">getset <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> ä»¥æ–°æ¢æ—§ï¼Œè®¾ç½®æ–°å€¼çš„åŒæ—¶è·å–æ—§å€¼</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><h5 id="sring-å­—ç¬¦ä¸²"><a href="#sring-å­—ç¬¦ä¸²" class="headerlink" title="sring å­—ç¬¦ä¸²"></a>sring å­—ç¬¦ä¸²</h5><blockquote>
<p>stringçš„æ•°æ®ç»“æ„ä¸ºç®€å•çš„åŠ¨æ€å­—ç¬¦ä¸²ï¼Œå†…éƒ¨ç»“æ„å®ç°ä¸Šç±»ä¼¼Javaçš„ArrayList,é‡‡ç”¨é¢„åˆ†é…å†—ä½™ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜çš„é¢‘ç¹åˆ†é…ï¼Œæœ€å¤§é•¿åº¦512M</p>
</blockquote>
<h5 id="list-åˆ—è¡¨"><a href="#list-åˆ—è¡¨" class="headerlink" title="list åˆ—è¡¨"></a>list åˆ—è¡¨</h5><blockquote>
<ol>
<li>ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å™é¡ºåºæ’åºï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åœ¨åˆ—è¡¨çš„å¤´(å·¦è¾¹)æˆ–è€…å°¾éƒ¨(å³è¾¹)</li>
<li>ä»–çš„åº•å±‚å®é™…æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¯¹ä¸¤è¾¹æ“ä½œæ€§èƒ½å¾ˆé«˜ã€‚</li>
</ol>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lpush/rpush <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span>... å·¦/å³æ·»åŠ </span><br><span class="line">lpop/rpop å¼¹å‡ºå·¦/å³å€¼</span><br><span class="line">rpoplpush <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">key2</span>&gt;</span></span> å¼¹å‡ºåˆ—è¡¨å³è¾¹ä¸€ä¸ªå€¼ï¼Œæ’å…¥åˆ°key2åˆ—è¡¨å·¦è¾¹</span><br><span class="line">lrange <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">start</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">stop</span>&gt;</span></span> æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´ (å·¦åˆ°å³)</span><br><span class="line">llen <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span>è·å–é•¿åº¦</span><br><span class="line">linsert <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> before <span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">newvalue</span>&gt;</span></span> åœ¨<span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>åæ’å…¥<span class="language-xml"><span class="tag">&lt;<span class="name">newvalue</span>&gt;</span></span></span><br><span class="line">lrem <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">n</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> ä»å·¦è¾¹åˆ é™¤nä¸ªvalue(ä»å·¦åˆ°å³)</span><br><span class="line">lset <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">index</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>å°†åˆ—è¡¨keyä¸‹æ ‡ä¸ºindexçš„å€¼æ›¿æ¢æˆvalue</span><br></pre></td></tr></table></figure>

<h5 id="set-é›†åˆ"><a href="#set-é›†åˆ" class="headerlink" title="set é›†åˆ"></a>set é›†åˆ</h5><blockquote>
<p>ä¸listç±»ä¼¼ï¼Œä½†æ˜¯å¯ä»¥è‡ªåŠ¨å»é‡</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sadd <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span> æ·»åŠ å¤šä¸ªå€¼</span><br><span class="line">smembers <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> å–å‡ºè¯¥é›†åˆçš„æ‰€æœ‰å€¼</span><br><span class="line">sismenmber <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> åˆ¤æ–­é›†åˆ<span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span>æ˜¯å¦å«æœ‰è¯¥<span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>å€¼ æœ‰1ï¼Œæ²¡æœ‰0</span><br><span class="line">scard <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> è¿”å›è¯¥é›†åˆçš„å…ƒç´ ä¸ªæ•°</span><br><span class="line">srem <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span>... åˆ é™¤é›†åˆä¸­çš„æŸä¸ªå…ƒç´ </span><br><span class="line">spop <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> éšæœºåå‡ºé›†åˆä¸­çš„æŸä¸ªå€¼</span><br><span class="line">srandmember <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">n</span>&gt;</span></span> éšæœºä»è¯¥é›†åˆä¸­å–å‡ºnä¸ªå€¼ï¼Œä¸ä¼šåˆ é™¤</span><br><span class="line">smove <span class="language-xml"><span class="tag">&lt;<span class="name">source</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">destination</span>&gt;</span></span> value æŠŠé›†åˆä¸­çš„å€¼ä¸€ä¸ªå€¼ç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆ</span><br><span class="line">sinter <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">key2</span>&gt;</span></span> è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†å…ƒç´ </span><br><span class="line">sunion <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">key2</span>&gt;</span></span> è¿”å›å¹¶é›†å…ƒç´ </span><br><span class="line">sdiff <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">key2</span>&gt;</span></span> è¿”å›å·®é›†å…ƒç´ </span><br></pre></td></tr></table></figure>

<h5 id="hash-å“ˆå¸Œ"><a href="#hash-å“ˆå¸Œ" class="headerlink" title="hash å“ˆå¸Œ"></a>hash å“ˆå¸Œ</h5><blockquote>
<p>hashæ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚</p>
<p>ç±»ä¼¼Javaé‡Œé¢çš„Map&lt;String, Object&gt;</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hset <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span>ç»™keyé›†åˆä¸­çš„fieldé”®èµ‹å€¼</span><br><span class="line">hget <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field</span>&gt;</span></span> è·å–fieldçš„å€¼</span><br><span class="line">hmset <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field2</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span>... è®¾ç½®å¤šä¸ªå€¼</span><br><span class="line">hexists <span class="language-xml"><span class="tag">&lt;<span class="name">key1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field</span>&gt;</span></span> æŸ¥çœ‹fieldæ˜¯å¦å­˜åœ¨</span><br><span class="line">hkeys <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> åˆ—å‡ºæ‰€æœ‰field</span><br><span class="line">hvals <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> åˆ—å‡ºæ‰€æœ‰value</span><br><span class="line">hincrby <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">increment</span>&gt;</span></span> å¯¹field å¢åŠ  1</span><br><span class="line">hsetnx <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">field</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> fieldä¸å­˜åœ¨ï¼Œæ‰ä¼šæ·»åŠ </span><br></pre></td></tr></table></figure>

<h5 id="zset-æœ‰åºé›†åˆ"><a href="#zset-æœ‰åºé›†åˆ" class="headerlink" title="zset æœ‰åºé›†åˆ"></a>zset æœ‰åºé›†åˆ</h5><blockquote>
<p>zsetä¸æ™®é€šé›†åˆset éå¸¸ç›¸ä¼¼ï¼Œæ˜¯ä¸€ä¸ªæ²¡æœ‰ç›¸åŒå…ƒç´ çš„å­—ç¬¦ä¸²é›†åˆã€‚</p>
<p>ä¸åŒä¹‹å¤„æ˜¯æœ‰åºé›†åˆçš„æ¯ä¸ªæˆå‘˜éƒ½å…³è”äº†ä¸€ä¸ªè¯„åˆ†(score)ï¼Œè¿™ä¸ªè¯„åˆ†è¢«ç”¨æ¥æ’åº</p>
<p>åº•å±‚ ä½¿ç”¨äº†ä¸¤ä¸ªæ•°æ®ç»“æ„</p>
<p>(1) hash, hashçš„ä½œç”¨å°±æ˜¯å…³è”å…ƒç´ valueå’Œæƒé‡scoreï¼Œä¿éšœå…ƒç´ valueçš„å”¯ä¸€æ€§ï¼Œå¯ä»¥é€šè¿‡å…ƒç´ æ‰¾åˆ°ç›¸åº”çš„scoreå€¼</p>
<p>(2)è·³è·ƒè¡¨ï¼Œè·³è·ƒè¡¨çš„ç›®çš„æ˜¯åœ¨äºç»™å…ƒç´ valueæ’åºï¼Œæ ¹æ®scoreçš„èŒƒå›´è·å–å…ƒç´ åˆ—è¡¨</p>
<p>ä¸‹å›¾ï¼Œæ™®é€šé“¾è¡¨æŸ¥æ‰¾é¡ºåºéœ€è¦æŒ¨ä¸ªæ¯”è¾ƒæŸ¥æ‰¾ï¼Œä½†æ˜¯ä¸‹æ–¹å¦‚æœè¦æ‰¾å‡º51ï¼Œè·³è·ƒè¡¨åˆ™ä¼šå’Œç¬¬2å±‚1è¿›è¡Œæ¯”è¾ƒï¼Œ51æ¯”1å¤§ï¼Œç¬¬2å±‚ä¸‹ä¸€ä¸ªä¸51è¿›è¡Œæ¯”è¾ƒæœ€ååˆ°NULLä¼šä¸‹é™çš„ä¸‹ä¸€å±‚è¿›è¡Œå†åŒæ ·çš„æ–¹å¼è¿›è¡Œæ¯”è¾ƒâ€¦æœ€ç»ˆ4æ¬¡æ‰¾å‡º51</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603213758789.png" alt="image-20230603213758789"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">zadd <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">score1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value1</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">score2</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value2</span>&gt;</span></span>...  å°†ä¸€ä¸ªæˆ–å¤šä¸ªmemberå…ƒç´ åŠå…¶scoreå€¼åŠ å…¥åˆ°æœ‰åºé›†keyå½“ä¸­ã€‚</span><br><span class="line">zrange <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">start</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">stop</span>&gt;</span></span>[WITHSCORES]  è¿”å›æœ‰åºé›†keyä¸­ï¼Œä¸‹æ ‡åœ¨<span class="language-xml"><span class="tag">&lt;<span class="name">start</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">stop</span>&gt;</span></span>ä¹‹é—´çš„å…ƒç´ </span><br><span class="line">zrangebyscore <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">min</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">max</span>&gt;</span></span> [withscores] [limit offset count] è¿”å›æœ‰åºé›† key ä¸­ï¼Œæ‰€æœ‰scoreå€¼ä»‹äºminå’Œmax ä¹‹é—´(åŒ…æ‹¬ç­‰äºminæˆ–max )çš„æˆå‘˜</span><br><span class="line">zincrby <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">increment</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> ä¸ºå…ƒç´ çš„scoreåŠ ä¸Šå¢é‡</span><br><span class="line">zrem <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> åˆ é™¤è¯¥é›†åˆä¸‹ï¼ŒæŒ‡å®šå€¼çš„å…ƒç´ v</span><br><span class="line">zcount <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">min</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">max</span>&gt;</span></span> ç»Ÿè®¡è¯¥é›†åˆï¼Œåˆ†æ•°åŒºé—´å†…çš„å…ƒç´ ä¸ªæ•°ã€‚</span><br><span class="line">zrank <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span> è¿”å›è¯¥å€¼åœ¨é›†åˆä¸­çš„æ’åï¼Œä»0å¼€å§‹ã€‚</span><br></pre></td></tr></table></figure>

<h5 id="Bitmaps"><a href="#Bitmaps" class="headerlink" title="Bitmaps"></a>Bitmaps</h5><blockquote>
<ol>
<li>Bitmapsæœ¬èº«ä¸æ˜¯ä¸€ç§æ•°æ®ç±»å‹ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ä»–å¯å¯ä»¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œä½æ“ä½œ</li>
<li>Bitmapså•ç‹¬æä¾›ä¸€å¥—å‘½ä»¤ï¼Œæ‰€ä»¥redisä¸­ä½¿ç”¨Bitmapså’Œä½¿ç”¨å­—ç¬¦ä¸²çš„æ–¹æ³•ä¸åŒï¼Œå¯ä»¥æŠŠBitmapsæƒ³è±¡æˆä¸€ä¸ªä»¥ä½ä¸ºå•ä½çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå•å…ƒåªèƒ½å­˜å‚¨0å’Œ1ï¼Œæ•°ç»„ä¸‹æ ‡å†Bitmapsä¸­å«åšåç§»é‡</li>
<li>å¯ç”¨äºåšå¤šç”¨æˆ·æ´»è·ƒåº¦</li>
</ol>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">setbit <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">offset</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">value</span>&gt;</span></span></span><br><span class="line">getbit <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">offset</span>&gt;</span></span></span><br><span class="line">bitcount <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> [start end]</span><br><span class="line">bitop operation destkey key [key ...]</span><br><span class="line">å¯¹å¤šä¸ªå­—ç¬¦ä¸²è¿›è¡Œä½æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°destkeyä¸­</span><br><span class="line">operation å¯ä»¥æ˜¯ ANDã€ORã€XOR æˆ–è€… NOT</span><br><span class="line">BITOP AND destkey srckey1 srckey2 srckey3 ... srckeyNï¼Œå¯¹å¤šä¸ªkeyæ±‚é€»è¾‘ä¸ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°destkeyä¸­</span><br></pre></td></tr></table></figure>

<h5 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h5><blockquote>
<ol>
<li>ç”¨äºåŸºæ•°ç»Ÿè®¡ï¼ŒUV(UniqueVisitorï¼Œç‹¬ç«‹è®¿å®¢), ç‹¬ç«‹IPã€æœç´¢è®°å½•ç­‰éœ€è¦å»é‡å’Œè®¡æ•°çš„é—®é¢˜ã€‚</li>
<li>ä¼šè‡ªåŠ¨å»é‡</li>
</ol>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pfadd <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">element</span>&gt;</span></span>[element...] æ·»åŠ æŒ‡å®šå…ƒç´ åˆ°hyperloglogä¸­ (æˆåŠŸ1å¦åˆ™0)</span><br><span class="line">pfcount <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span> æ•°é‡ç»Ÿè®¡</span><br><span class="line">pfmerge <span class="language-xml"><span class="tag">&lt;<span class="name">destkey</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">sourcekey</span>&gt;</span></span> [sourcekey...] å°†ä¸€ä¸ªæˆ–è€…å¤šä¸ªHLLåˆå¹¶åçš„ç»“æœå­˜å‚¨åœ¨å¦ä¸€ä¸ªHLLä¸­, æ¯”å¦‚æ¯æœˆæ´»è·ƒåº¦ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ¯å¤©çš„æ´»è·ƒåº¦æ¥è®¡ç®—</span><br></pre></td></tr></table></figure>

<h5 id="Geospatial"><a href="#Geospatial" class="headerlink" title="Geospatial"></a>Geospatial</h5><blockquote>
<p>åœ°ç†ä¿¡æ¯çš„ç¼©å†™ï¼Œå¯ç”¨äºç»çº¬åº¦è®¾ç½®ã€æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ã€è·ç¦»æŸ¥è¯¢ã€ç»çº¬åº¦Hashç­‰å¸¸è§æ“ä½œï¼Œä¸€èˆ¬é€šè¿‡Javaç¨‹åºä¸€æ¬¡æ€§å¯¼å…¥</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">heoadd <span class="language-xml"><span class="tag">&lt;<span class="name">key</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">longitude</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">latitude</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">member</span>&gt;</span></span>[longitude latitude member...]</span><br><span class="line">ä¾‹å¦‚:</span><br><span class="line"><span class="code">	geoadd china:city 121.47.31.23 shanghai</span></span><br><span class="line"><span class="code">	geoadd china:city 106.50.29.53 chognqing 114.05 22.52 shenzhen 116.38 39.90 beijing</span></span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®æ–‡ä»¶ä»‹ç»"><a href="#é…ç½®æ–‡ä»¶ä»‹ç»" class="headerlink" title="é…ç½®æ–‡ä»¶ä»‹ç»"></a>é…ç½®æ–‡ä»¶ä»‹ç»</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Units é…ç½®å¤§å°å•ä½,å¼€å¤´å®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„åº¦é‡å•ä½ï¼Œåªæ”¯æŒbytesï¼Œä¸æ”¯æŒbit</span><br><span class="line">bind é»˜è®¤æƒ…å†µbind=127.0.0.1åªèƒ½æ¥å—æœ¬æœºçš„è®¿é—®è¯·æ±‚ æ³¨é‡Šæ‰</span><br><span class="line">protected-mode å°†æœ¬æœºè®¿é—®ä¿æŠ¤æ¨¡å¼è®¾ç½®no</span><br><span class="line">port ç«¯å£å·</span><br><span class="line">tcp-backlog è®¾ç½®tcpçš„backlogï¼Œbacklogå…¶å®æ˜¯ä¸€ä¸ªè¿æ¥é˜Ÿåˆ—ï¼Œbacklogé˜Ÿåˆ—æ€»å’Œ=æœªå®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ— + å·²ç»å®Œæˆä¸‰æ¬¡æ¡æ‰‹é˜Ÿåˆ—ã€‚</span><br><span class="line">timeout ä¸€ä¸ªç©ºé—²çš„å®¢æˆ·ç«¯ç»´æŒå¤šå°‘ç§’ä¼šå…³é—­ï¼Œ0è¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½ã€‚å³æ°¸ä¸å…³é—­</span><br><span class="line">tcp-keepalive å¯¹è®¿é—®å®¢æˆ·ç«¯çš„ä¸€ç§å¿ƒè·³æ£€æµ‹ï¼Œæ¯ä¸ªnç§’æ£€æµ‹ä¸€æ¬¡ã€‚</span><br><span class="line">daemonize æ˜¯å¦ä¸ºåå°è¿›ç¨‹ï¼Œè®¾ç½®ä¸ºyes dockerè®¾ç½®ä¸ºno</span><br><span class="line">pidfile å­˜æ”¾pidæ–‡ä»¶çš„ä½ç½®ï¼Œæ¯ä¸ªå®ä¾‹ä¼šäº§ç”Ÿä¸€ä¸ªä¸åŒçš„pidæ–‡ä»¶</span><br><span class="line">loglevel æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«ï¼ŒRedisæ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebugã€verboseã€noticeã€warningï¼Œé»˜è®¤ä¸ºnotice</span><br><span class="line">logfile æ—¥å¿—æ–‡ä»¶åç§°</span><br><span class="line">databases è®¾å®šåº“çš„æ•°é‡ é»˜è®¤16ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0ï¼Œå¯ä»¥ä½¿ç”¨SELECT <span class="language-xml"><span class="tag">&lt;<span class="name">dbid</span>&gt;</span></span>å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id</span><br><span class="line">requirepass å¯†ç </span><br><span class="line">maxclients è®¾ç½®redisåŒæ—¶å¯ä»¥ä¸å¤šå°‘ä¸ªå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ã€‚</span><br><span class="line">maxmemory å†…å­˜å¤§å°</span><br><span class="line">maxmemory-policy å†…å­˜ç­–ç•¥ </span><br><span class="line"><span class="code">    volatile-lruï¼šä½¿ç”¨LRUç®—æ³•ç§»é™¤keyï¼Œåªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ï¼›ï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="code">    allkeys-lruï¼šåœ¨æ‰€æœ‰é›†åˆkeyä¸­ï¼Œä½¿ç”¨LRUç®—æ³•ç§»é™¤key</span></span><br><span class="line"><span class="code">    volatile-randomï¼šåœ¨è¿‡æœŸé›†åˆä¸­ç§»é™¤éšæœºçš„keyï¼Œåªå¯¹è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®</span></span><br><span class="line"><span class="code">    allkeys-randomï¼šåœ¨æ‰€æœ‰é›†åˆkeyä¸­ï¼Œç§»é™¤éšæœºçš„key</span></span><br><span class="line"><span class="code">    volatile-ttlï¼šç§»é™¤é‚£äº›TTLå€¼æœ€å°çš„keyï¼Œå³é‚£äº›æœ€è¿‘è¦è¿‡æœŸçš„key</span></span><br><span class="line"><span class="code">    noevictionï¼šä¸è¿›è¡Œç§»é™¤ã€‚é’ˆå¯¹å†™æ“ä½œï¼Œåªæ˜¯è¿”å›é”™è¯¯ä¿¡æ¯</span></span><br><span class="line"><span class="code">maxmemory-samples è®¾ç½®æ ·æœ¬æ•°é‡ï¼ŒLRUç®—æ³•å’Œæœ€å°TTLç®—æ³•éƒ½å¹¶éæ˜¯ç²¾ç¡®çš„ç®—æ³•ï¼Œè€Œæ˜¯ä¼°ç®—å€¼ï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¾ç½®æ ·æœ¬çš„å¤§å°ï¼Œredisé»˜è®¤ä¼šæ£€æŸ¥è¿™ä¹ˆå¤šä¸ªkeyå¹¶é€‰æ‹©å…¶ä¸­LRUçš„é‚£ä¸ªã€‚</span></span><br><span class="line"><span class="code">ä¸€èˆ¬è®¾ç½®3åˆ°7çš„æ•°å­—ï¼Œæ•°å€¼è¶Šå°æ ·æœ¬è¶Šä¸å‡†ç¡®ï¼Œä½†æ€§èƒ½æ¶ˆè€—è¶Šå°ã€‚</span></span><br></pre></td></tr></table></figure>

<h3 id="å‘å¸ƒä¸è®¢é˜…"><a href="#å‘å¸ƒä¸è®¢é˜…" class="headerlink" title="å‘å¸ƒä¸è®¢é˜…"></a>å‘å¸ƒä¸è®¢é˜…</h3><blockquote>
<ol>
<li>Redis å‘å¸ƒè®¢é˜… (pub&#x2F;sub) æ˜¯ä¸€ç§æ¶ˆæ¯é€šä¿¡æ¨¡å¼ï¼šå‘é€è€… (pub) å‘é€æ¶ˆæ¯ï¼Œè®¢é˜…è€… (sub) æ¥æ”¶æ¶ˆæ¯ã€‚</li>
<li>Redis å®¢æˆ·ç«¯å¯ä»¥è®¢é˜…ä»»æ„æ•°é‡çš„é¢‘é“ã€‚</li>
</ol>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603215831421.png" alt="image-20230603215831421"></p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ‰“å¼€ä¸€ä¸ªå®¢æˆ·ç«¯è®¢é˜…channel1</span><br><span class="line"><span class="code">	SUBSCRIBE channel1</span></span><br><span class="line"><span class="code">æ‰“å¼€å¦ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç»™channel1å‘å¸ƒæ¶ˆæ¯hello</span></span><br><span class="line"><span class="code">	publish channel1 hello</span></span><br><span class="line"><span class="code">æ‰“å¼€ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥çœ‹åˆ°å‘é€çš„æ¶ˆæ¯</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603220207952.png" alt="image-20230603220207952"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230603220214534.png" alt="image-20230603220214534"></p>
<h3 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h3><blockquote>
<p>Javaæ“ä½œrediså·¥å…·</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">System.out.println(jedis.lrange(<span class="string">&quot;list&quot;</span>, <span class="number">0</span>, <span class="number">4</span>));</span><br><span class="line">[<span class="number">123</span>, <span class="number">100</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">500</span>]</span><br><span class="line">System.out.println(jedis.keys(<span class="string">&quot;*&quot;</span>));</span><br><span class="line">[uu, uu2, k1, k2, andkey, list]</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jedis.flushDB(); <span class="comment">// æ¸…ç©ºæ‰€æœ‰key</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230606220300199.png" alt="image-20230606220300199"></p>
<h3 id="éªŒè¯ç åŠŸèƒ½"><a href="#éªŒè¯ç åŠŸèƒ½" class="headerlink" title="éªŒè¯ç åŠŸèƒ½"></a>éªŒè¯ç åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">verifyCode</span><span class="params">(String phone, String code)</span> &#123;</span><br><span class="line">    <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">    jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">verifyCode</span> <span class="operator">=</span> jedis.get(phone);</span><br><span class="line">    <span class="keyword">if</span> (verifyCode == <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æœªå‘é€éªŒè¯ç !&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!verifyCode.equals(code)) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€éªŒè¯ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sendVerifyCode</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">verifyCodeTimeout</span> <span class="operator">=</span> <span class="number">120</span>;</span><br><span class="line">    <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">    jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (jedis.get(phone) != <span class="literal">null</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;éªŒè¯ç å­˜åœ¨!&quot;</span>);</span><br><span class="line">        jedis.close();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    jedis.setex(phone, verifyCodeTimeout, getVerifyCode());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”ŸæˆéšæœºéªŒè¯ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getVerifyCode</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> String.valueOf(<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10000</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SpringBootæ•´åˆredis"><a href="#SpringBootæ•´åˆredis" class="headerlink" title="SpringBootæ•´åˆredis"></a>SpringBootæ•´åˆredis</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸºæœ¬é…ç½®</span></span><br><span class="line">spring.redis.host=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">spring.redis.port=<span class="number">6379</span></span><br><span class="line">spring.redis.password=<span class="number">123456</span></span><br><span class="line"><span class="comment">// é…ç½®è¿æ¥æ± </span></span><br><span class="line">spring.redis.lettuce.pool.max-idle=<span class="number">16</span></span><br><span class="line">spring.redis.lettuce.pool.max-active=<span class="number">32</span></span><br><span class="line">spring.redis.lettuce.pool.min-idle=<span class="number">8</span></span><br></pre></td></tr></table></figure>

<h3 id="äº‹åŠ¡å’Œé”"><a href="#äº‹åŠ¡å’Œé”" class="headerlink" title="äº‹åŠ¡å’Œé”"></a>äº‹åŠ¡å’Œé”</h3><blockquote>
<ol>
<li>ä¸²è”å¤šä¸ªå‘½ä»¤ï¼Œé˜²æ­¢å‘½ä»¤æ’é˜Ÿ</li>
<li>Multiã€Execã€discard</li>
<li>å½“Multiå‘½ä»¤å¼€å§‹ï¼Œè¾“å…¥çš„å‘½ä»¤éƒ½ä¼šä¾æ¬¡è¿›å…¥åˆ°å‘½ä»¤é˜Ÿåˆ—ä¸­ï¼Œä½†ä¸ä¼šæ‰§è¡Œï¼ŒçŸ¥é“è¾“å…¥Execåï¼ŒRedisä¼šå°†ä¹‹å‰çš„å‘½ä»¤é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œ(æ‰§è¡Œå‘½ä»¤ï¼Œç±»ä¼¼commit)</li>
<li>ç»„é˜Ÿçš„è¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡discardæ¥æ”¾å¼ƒç»„é˜Ÿ(æ”¾å¼ƒå‘½ä»¤ï¼Œç±»ä¼¼rollback)</li>
<li>å¦‚æœç»„é˜Ÿä¸­æœ‰é”™è¯¯ï¼Œæ•´æ¡ç»„é˜Ÿéƒ½ä¸ä¼šæ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œä¸­æœ‰é”™è¯¯ï¼Œå°±ä»…é”™è¯¯çš„å‘½ä»¤ä¸æ‰§è¡Œã€‚ğŸˆğŸˆğŸˆ</li>
</ol>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230607105134192.png" alt="image-20230607105134192"></p>
<h5 id="äº‹åŠ¡å†²çª"><a href="#äº‹åŠ¡å†²çª" class="headerlink" title="äº‹åŠ¡å†²çª"></a>äº‹åŠ¡å†²çª</h5><blockquote>
<ol>
<li>æ‚²è§‚é”ï¼Œæ¯æ¬¡æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºiåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼šblockçŸ¥é“å®ƒæ‹¿åˆ°é”ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹ç³»ç»Ÿæ•°æ®åº“é‡Œè¾¹å°±ç”¨åˆ°äº†å¾ˆå¤šè¿™ç§é”æœºåˆ¶ï¼Œæ¯”å¦‚è¡Œé”ã€è¡¨é”ã€è¯»é”ã€å†™é”ç­‰ã€‚</li>
<li>ä¹è§‚é”ï¼Œé€šè¿‡ç‰ˆæœ¬å·æ¥é™åˆ¶æ“ä½œï¼Œä¾‹å¦‚ABä¸¤ä¸ªäººå¯¹æŸä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå…ˆä¿®æ”¹çš„ä¼šæ›´æ–°versionè¿™ä¸ªå­—æ®µï¼Œåä¿®æ”¹çš„ä¼šå‘ç°æ•°æ®åº“ä¸­çš„versionå’Œè‡ªå·±çš„versionä¸ä¸€æ ·ï¼Œå°±ä¸èƒ½è¿›è¡Œæ“ä½œï¼Œç›´åˆ°è‡ªå·±æ›´æ–°åæ‰èƒ½æ“ä½œã€‚</li>
</ol>
</blockquote>
<p>åœ¨æ‰§è¡Œmultiä¹‹å‰ï¼Œå¯é€šè¿‡watch key[keyâ€¦]æ¥ç›‘è§†ä¸€ä¸ªæˆ–è€…å¤šä¸ªkeyï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”è¿™ä¸ªkeyè¢«ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆäº‹åŠ¡å°±ä¼šè¢«æ‰“æ–­(ä¹è§‚é”)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230607111754781.png" alt="image-20230607111754781"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230607111853044.png" alt="image-20230607111853044"></p>
<h5 id="Redisäº‹åŠ¡ä¸‰ç‰¹æ€§ğŸˆğŸˆğŸˆ"><a href="#Redisäº‹åŠ¡ä¸‰ç‰¹æ€§ğŸˆğŸˆğŸˆ" class="headerlink" title="Redisäº‹åŠ¡ä¸‰ç‰¹æ€§ğŸˆğŸˆğŸˆ"></a>Redisäº‹åŠ¡ä¸‰ç‰¹æ€§ğŸˆğŸˆğŸˆ</h5><blockquote>
<ol>
<li>å•ç‹¬çš„éš”ç¦»æ“ä½œï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œã€‚äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤æ‰“æ–­</li>
<li>æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µï¼šé˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ²¡æœ‰æäº¤ä¹‹å‰ä¸ä¼šå®é™…è¢«æ‰§è¡Œï¼Œå› ä¸ºäº‹åŠ¡æäº¤ä¹‹å‰ä»»ä½•æŒ‡ä»¤éƒ½ä¸ä¼šè¢«å®é™…æ‰§è¡Œ</li>
<li>ä¸ä¿è¯åŸå­æ€§ï¼šäº‹åŠ¡ä¸­å¦‚æœæœ‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶åçš„å‘½ä»¤ä»»ç„¶ä¼šè¢«æ‰§è¡Œï¼Œæ²¡æœ‰å›æ»š</li>
</ol>
</blockquote>
<h5 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/t&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">ValueOperations</span> <span class="variable">valueOperations</span> <span class="operator">=</span> redisTemplate.opsForValue();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">product</span> <span class="operator">=</span> Integer.valueOf(String.valueOf(valueOperations.get(<span class="string">&quot;product&quot;</span>)));</span><br><span class="line">    <span class="keyword">if</span> (product &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;äº§å“: &quot;</span> + valueOperations.increment(<span class="string">&quot;product&quot;</span>, -<span class="number">1</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­æˆåŠŸ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æŠ¢å®Œäº†&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>500ä¸ªçº¿ç¨‹ï¼ŒæŠ¢è´­å•†å“ï¼Œå•†å“å–æˆè´Ÿæ•°äº†</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230607213612719.png" alt="image-20230607213612719"></p>
<p>é€šè¿‡luaè„šæœ¬ä¿è¯åŸå­æ€§</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">lua</span> <span class="operator">=</span> <span class="string">&quot;local current = redis.call(&#x27;get&#x27;, &#x27;product&#x27;)\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;if tonumber(current) &gt; 0 then\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;  redis.call(&#x27;decr&#x27;, &#x27;product&#x27;)\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;  return 1\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;end\n&quot;</span> +</span><br><span class="line">    <span class="string">&quot;return 0\n&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">TestController</span><span class="params">(RedisTemplate redisTemplate)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/t&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">RedisScript</span> <span class="variable">longDefaultRedisScript</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultRedisScript</span>(lua, Long.class);</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">execute</span> <span class="operator">=</span> Integer.valueOf(String.valueOf(redisTemplate.execute(longDefaultRedisScript, <span class="literal">null</span>, <span class="string">&quot;1&quot;</span>)));</span><br><span class="line">    <span class="keyword">if</span> (execute == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;è¯·è´­æˆåŠŸ&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;æŠ¢è´­å®Œäº†&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤šçº¿ç¨‹å‡ºç°é—®é¢˜"><a href="#å¤šçº¿ç¨‹å‡ºç°é—®é¢˜" class="headerlink" title="å¤šçº¿ç¨‹å‡ºç°é—®é¢˜"></a>å¤šçº¿ç¨‹å‡ºç°é—®é¢˜</h3><h5 id="è¶…å–"><a href="#è¶…å–" class="headerlink" title="è¶…å–"></a>è¶…å–</h5><ol>
<li>é€šè¿‡äº‹åŠ¡ä¹è§‚é”è§£å†³(ä¼šå‡ºç°å°‘å–)</li>
<li>é€šè¿‡Luaè„šæœ¬</li>
</ol>
<h5 id="è¿æ¥è¶…æ—¶"><a href="#è¿æ¥è¶…æ—¶" class="headerlink" title="è¿æ¥è¶…æ—¶"></a>è¿æ¥è¶…æ—¶</h5><p>è¯·æ±‚è¿æ¥æ•°å¤§äºredisè®¾ç½®çš„è¿æ¥æ•°ï¼Œå¯é€šè¿‡è®¾ç½®redisçš„è¶…æ—¶æ—¶é—´å’Œè¿æ¥ä¸ªæ•°</p>
<h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h3><h5 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h5><blockquote>
<ol>
<li>æŒ‡å®šæ—¶é—´é—´éš”ç±»ï¼Œè¿›è¡Œæ•°æ®é›†å¿«ç…§ï¼Œä½†æ˜¯ä¼šé€ æˆæ•°æ®ä¸¢å¤±(æœåŠ¡å™¨å®•æœº)</li>
<li>redisä¼šå•ç‹¬åˆ›å»º(fork)ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¼šå…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­ï¼ŒæŒä¹…ç»“æŸåï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šä¸€æ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½•ioæ“ä½œçš„ï¼Œè¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ï¼Œå¦‚æœéœ€è¦å¤§è§„æ¨¡çš„æ•°æ®æ¢å¤ï¼Œä¸”å¯¹æ•°æ®çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£rdbæ–¹å¼è¦æ¯”aopæ–¹å¼æ›´åŠ é«˜æ•ˆã€‚</li>
</ol>
</blockquote>
<h5 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h5><blockquote>
<ol>
<li><p>å¯¹å†™æ“ä½œè¿›è¡ŒæŒä¹…åŒ–ï¼Œä¸ä¼šå‡ºç°æ•°æ®ä¸¢å¤±</p>
</li>
<li><p>é€šè¿‡æ—¥å¿—çš„å½¢å¼ï¼Œè®°å½•æ¯ä¸€ä¸ªå†™æ“ä½œ</p>
</li>
<li><hr>
</li>
<li><p>å¦‚æœAOFå’ŒRDBåŒæ—¶å¼€å¯ï¼Œredisä¼šé»˜è®¤æ‰§è¡ŒAOFçš„</p>
</li>
<li><p>é…ç½®ä¿®æ”¹(å…¶ä¸­é…ç½®æ–‡ä»¶è¢«åˆ é™¤ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª.bakçš„æ–‡ä»¶é˜²æ­¢åˆ é™¤ï¼Œä¿®æ”¹åå­—ååˆå¯ä»¥ç”¨äº†)</p>
</li>
<li><p>appendonly no ä¿®æ”¹ä¸º yes</p>
</li>
<li><p>æ–‡ä»¶å¼‚å¸¸æ¢å¤ï¼Œå¦‚æœAOFæ–‡ä»¶æŸåäº†ï¼Œå¯ä»¥ç”¨è¿‡&#x2F;usr&#x2F;local&#x2F;bin&#x2F;redis-check-aofâ€“fix æŒ‡ä»¤ä¿®å¤appendonly.aofæ–‡ä»¶</p>
</li>
<li><p>åŒæ­¥é¢‘ç‡è®¾ç½® appendfsyncï¼šaways å½“rediså†™å…¥ç«‹å³è®°å…¥æ—¥å¿—ï¼Œä¼šæŸè€—æ€§èƒ½ï¼Œä½†æ˜¯å®Œæ•´æ€§å¥½ï¼Œeverysec æ¯ç§’è®°å…¥ä¸€æ¬¡ï¼Œno ä¸ä¸»åŠ¨åŒæ­¥ï¼Œäº¤ç»™æ“ä½œç³»ç»Ÿ</p>
</li>
<li><p>Rewriteå‹ç¼©(å‹ç¼©.aofæ–‡ä»¶å¤§å°)ï¼šå½“appendonly.aofæ–‡ä»¶å¤§äº64Mæ—¶æ‰ä¼šé‡å†™å‹ç¼©</p>
</li>
</ol>
</blockquote>
<h3 id="ä¸»ä»å¤åˆ¶"><a href="#ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸»ä»å¤åˆ¶"></a>ä¸»ä»å¤åˆ¶</h3><blockquote>
<ol>
<li>è¯»å†™åˆ†ç¦»(ä¸»æœºå†™ï¼Œä»æœºè¯»)ï¼Œæ€§èƒ½æ‰©å±•ï¼Œå®¹ç¾å¿«é€Ÿå›å¤(æŸä¸€å°Rediså®•æœºåï¼Œå…¶ä»–èƒ½å¿«é€Ÿæ¢å¤æä¾›æœåŠ¡)</li>
<li>ä¸€ä¸»ä¸€ä»æˆ–è€…ä¸€ä¸»å¤šä»</li>
<li>åŸç†ï¼š</li>
</ol>
</blockquote>
<h5 id="æ­å»º"><a href="#æ­å»º" class="headerlink" title="æ­å»º"></a>æ­å»º</h5><blockquote>
<ol>
<li><p>åˆ›å»ºä¸€ä¸ªä¸»æœºä¸”ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»æœº</p>
</li>
<li><p>å‡†å¤‡redis.confé…ç½®æ–‡ä»¶ï¼Œå…³é—­appendonly</p>
</li>
<li><p>åœ¨æ¯ä¸ªredisé…ç½®æ–‡ä»¶ä¸­å¡«å…¥ä»¥ä¸‹</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609151820424.png" alt="image-20230609151820424"></p>
</li>
<li><p>å†ä¾æ¬¡å¯åŠ¨redisæœåŠ¡å™¨ï¼Œåœ¨ä»æœºä¸­é€šè¿‡slaveof [host] [port]ï¼Œå¯é€šè¿‡info replicatioinæŸ¥çœ‹å½“å‰redisçš„ä¸»ä»çŠ¶æ€</p>
</li>
</ol>
</blockquote>
<h5 id="ä¸€ä¸»ä¸¤ä»"><a href="#ä¸€ä¸»ä¸¤ä»" class="headerlink" title="ä¸€ä¸»ä¸¤ä»"></a>ä¸€ä¸»ä¸¤ä»</h5><blockquote>
<ol>
<li>ä»æœåŠ¡å™¨å¦‚æœæŒ‚æ‰äº†ï¼Œå†æ­¤é‡å¯åä¼šå˜æˆä¸»æœåŠ¡å™¨(éœ€è¦é‡æ–°è®¾ç½®slaveof)</li>
<li>ä¸»æœåŠ¡å™¨æŒ‚æ‰åï¼Œä»æœåŠ¡å™¨ä¾ç„¶çŸ¥é“ä¸»æœåŠ¡å™¨ï¼Œä¸ä¼šç¯¡ä½ã€‚ä¸»æœåŠ¡å™¨é‡å¯åï¼Œä¾ç„¶èƒ½ç”¨</li>
<li>åŸç†ï¼š<ol>
<li>å½“ä»è¿æ¥ä¸Šä¸»æœåŠ¡å™¨åï¼Œä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€è¡Œæ•°æ®åŒæ­¥ä¿¡æ¯</li>
<li>ä¸»æœåŠ¡å™¨æ¥æ”¶åˆ°ä»æœåŠ¡å™¨å‘é€è¿‡æ¥çš„åŒæ­¥ä¿¡æ¯åè¿›è¡ŒæŒä¹…åŒ–ï¼Œå°†æŒä¹…åŒ–æ–‡ä»¶å‘é€ç»™ä»æœåŠ¡å™¨ä½¿ç”¨</li>
</ol>
</li>
<li>æ•°æ®ç±»å‹ï¼šå…¨é‡å¤åˆ¶å’Œå¢é‡å¤åˆ¶</li>
</ol>
</blockquote>
<h5 id="è–ªç«ç›¸ä¼ "><a href="#è–ªç«ç›¸ä¼ " class="headerlink" title="è–ªç«ç›¸ä¼ "></a>è–ªç«ç›¸ä¼ </h5><p>åŸç‰ˆ</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609215134339.png" alt="image-20230609215134339"></p>
<p>æ›´æ–°(æ­¤æ–¹å¼ï¼Œå¯é™ä½ä¸»æœåŠ¡å™¨çš„å‹åŠ›)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609215240573.png" alt="image-20230609215240573"></p>
<h5 id="åå®¢ä¸ºä¸»"><a href="#åå®¢ä¸ºä¸»" class="headerlink" title="åå®¢ä¸ºä¸»"></a>åå®¢ä¸ºä¸»</h5><blockquote>
<ol>
<li>å½“ä¸»æœåŠ¡å™¨æŒ‚æ‰åï¼Œä»æœåŠ¡å™¨ä¸Šä½</li>
<li>æŒ‡ä»¤slaveof no one å°†ä»æœºå˜ä¸ºä¸»æœºï¼ˆç¼ºç‚¹ï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½®, å¯é€šè¿‡å“¨å…µæ¨¡å¼å¤„ç†ï¼‰</li>
</ol>
</blockquote>
<h3 id="å“¨å…µæ¨¡å¼"><a href="#å“¨å…µæ¨¡å¼" class="headerlink" title="å“¨å…µæ¨¡å¼"></a>å“¨å…µæ¨¡å¼</h3><blockquote>
<p>ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œè‡ªåŠ¨å°†ä»æœºåˆ‡æ¢æˆä¸»æœºï¼Œå¼‚å¸¸æœåŠ¡å™¨é‡å¯åä¼šè‡ªåŠ¨å˜æˆä»æœºï¼›å¹¶ä¸”ä¼šæœ‰å¤åˆ¶å»¶æ—¶çš„é—®é¢˜ï¼šç”±äºæ‰€æœ‰å†™æ“ä½œéƒ½æ˜¯å†™å†masterä¸Šçš„ï¼Œç„¶åå†åŒæ­¥åˆ°slaveä¸Šï¼Œæ‰€æœ‰æœ‰ä¸€å®šå»¶è¿Ÿï¼Œç³»ç»Ÿç¹å¿™æ—¶ï¼Œå»¶è¿Ÿé—®é¢˜ä¼šåŠ å‰§</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609220135353.png" alt="image-20230609220135353"></p>
<p>æ­¥éª¤:</p>
<ol>
<li>è‡ªå®šä¹‰&#x2F;myredisç›®å½•ä¸‹æ–°å»ºsentinel.confæ–‡ä»¶åå­—(ä¸èƒ½å†™é”™)</li>
<li>é…ç½®å“¨å…µ: sentinel monitor mymaster [host] [ip] 1 (mymasterä¸ºç›‘æ§å¯¹è±¡çš„æœåŠ¡å™¨åç§°ï¼Œ1ä¸ºè‡³å°‘æœ‰å¤šå°‘ä¸ªå“¨å…µåŒæ„è¿ç§»çš„æ•°é‡) </li>
<li>å¯åŠ¨å“¨å…µï¼šredis-sentinel é…ç½®æ–‡ä»¶è·¯å¾„</li>
<li>å…¶ä¸­redisé…ç½®æ–‡ä»¶ä¸­replica-priorityå¯è®¾ç½®æˆä¸ºä¸»æœåŠ¡å™¨ä¼˜å…ˆçº§(é€‰æ‹©é¡ºåº: ä¼˜å…ˆçº§-&gt;åç§»é‡(åŒæ­¥æ•°æ®é‡)-&gt;runidæœ€å°çš„)</li>
</ol>
<h3 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h3><blockquote>
<p>è§£å†³ï¼šè¯»å†™å‹åŠ›ï¼Œä¸»ä»å¤åˆ¶ï¼Œè–ªç«ç›¸ä¼ æ¨¡å¼ï¼Œä¸»æœºå®•æœºå¯¼è‡´IPåœ°å€æ”¾ç”Ÿå˜åŒ–ä»è€Œéœ€è¦å»æ›´æ”¹é…ç½®</p>
</blockquote>
<p>æ— ä¸­å¿ƒåŒ–é›†ç¾¤</p>
<blockquote>
<p>æœåŠ¡é—´åˆ†åˆ«åˆ›å»ºä¸»ä»å¤åˆ¶ï¼Œè¿™æ ·èƒ½ä¿è¯å¦‚æœä¸€ä¸ªæœåŠ¡å®•æœºäº†ï¼Œå…¶ä»–æœåŠ¡è¿˜èƒ½ä½¿ç”¨</p>
</blockquote>
<h3 id="åº”ç”¨é—®é¢˜è§£å†³"><a href="#åº”ç”¨é—®é¢˜è§£å†³" class="headerlink" title="åº”ç”¨é—®é¢˜è§£å†³"></a>åº”ç”¨é—®é¢˜è§£å†³</h3><h5 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h5><blockquote>
<p>ç°è±¡: webåº”ç”¨æœåŠ¡å™¨å‹åŠ›çªç„¶å˜å¤§,è®¿é—®redisç¼“å­˜ä¸å­˜åœ¨çš„æ•°æ®,ç„¶åç›´æ¥å»è®¿é—®æ•°æ®åº“(å¯¼è‡´çªç„¶å¤§é‡è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“,å¯¼è‡´æ•°æ®åº“å‹åŠ›è¿…é€Ÿå¢åŠ ,æœ€ç»ˆå¯¼è‡´æ•°æ®åº“å´©æºƒ)</p>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<ol>
<li>å¯¹ç©ºå€¼ç¼“å­˜: å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©º(ä¸ç®¡æ•°æ®å­˜ä¸å­˜åœ¨),æˆ‘ä»¬ä»»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœè¿›è¡Œç¼“å­˜</li>
<li>è®¾ç½®å¯è®¿é—®çš„åå•(ç™½åå•): è®¾ç½®è®¿é—®ç™½åå•,å¯ä»¥ä½¿ç”¨bitmapså®šä¹‰ä¸€ä¸ªå¯ä»¥è®¿é—®çš„åå•,</li>
<li>é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨: å¸ƒéš†æå‡ºçš„ä¸€ä¸ªå¾ˆé•¿çš„å¾ˆäºŒè¿›åˆ¶å‘é‡(ä½å›¾)å’Œä¸€ç³»åˆ—æ˜ å°„å‡½æ•°(å“ˆå¸Œå‡½æ•°)</li>
</ol>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609225045889.png" alt="image-20230609225045889"></p>
<h5 id="ç¼“å­˜å‡»ç©¿"><a href="#ç¼“å­˜å‡»ç©¿" class="headerlink" title="ç¼“å­˜å‡»ç©¿"></a>ç¼“å­˜å‡»ç©¿</h5><blockquote>
<p>æ•°æ®åº“è®¿é—®å‹åŠ›ç¬é—´å¢åŠ , ä½†æ˜¯redisé‡Œé¢æ²¡æœ‰å‡ºç°å¤§é‡keyè¿‡æœŸ,å¹¶ä¸”redisè¿è¡Œæ­£å¸¸</p>
<p>åŸå› : redisæŸä¸ªkeyè¿‡æœŸäº†,å¤§é‡è®¿é—®ä½¿ç”¨è¿™ä¸ªkey</p>
<p>è§£å†³æ–¹æ¡ˆ:</p>
<ol>
<li>é¢„å…ˆè®¾ç½®çƒ­é—¨æ•°æ®: åœ¨redisé«˜å³°è®¿é—®æ—¶é—´ä¹‹å‰,æŠŠä¸€äº›äººä»¬æ•°æ®å­˜å‚¨åˆ°redisä¸­,å¹¶ä¸”åŠ é•¿è¿™å†™çƒ­é—¨keyçš„æ—¶å¸¸</li>
<li>å®æ—¶è°ƒæ•´: ç°åœºç›‘æ§çœ‹é‚£ä¸ªé‚£äº›æ•°æ®çƒ­é—¨,å®æ—¶è°ƒæ•´keyçš„è¿‡æœŸæ—¶é•¿</li>
<li>ä½¿ç”¨é”: <ol>
<li>ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™(åˆ¤æ–­æ˜¯å¦ä¸ºç©º), ä¸æ˜¯ç«‹å³å»load db</li>
<li>å…ˆä½¿ç”¨ç¼“å­˜å·¥å…·çš„æŸäº›å¸¦æˆåŠŸçš„è¿”å›å€¼çš„æ“ä½œ(æ¯”å¦‚redisçš„setnx)</li>
</ol>
</li>
</ol>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230609230937909.png" alt="image-20230609230937909"></p>
<h5 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h5><blockquote>
<ol>
<li>å¤§é‡ç¼“å­˜è¿‡æœŸå¤±æ•ˆï¼Œå…¨éƒ¨è®¿é—®åˆ°æ•°æ®åº“äº†</li>
<li>è§£å†³ï¼š<ol>
<li>æ„å»ºå¤šçº§ç¼“å­˜æ¶æ„ï¼šnginxç¼“å­˜ + redisç¼“å­˜ + å…¶ä»–ç¼“å­˜(ehcacheç­‰)</li>
<li>ä½¿ç”¨é”æˆ–é˜Ÿåˆ—ï¼šç”¨é”æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“æ“ä½œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶çš„å¤§é‡å¹¶å‘è¯·æ±‚åœ¨æ•°æ®åº“ä¸­(ä¸é€‚åˆé«˜å¹¶å‘æƒ…å†µ)</li>
</ol>
</li>
<li>ç¼“å­˜å¤±æ•ˆæ—¶é—´ä¸ä¸€è‡´</li>
</ol>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://boluokk.gitee.io/blog/assets/blogImg/Redis.assets/image-20230610125517494.png" alt="image-20230610125517494"></p>
<h3 id="åˆ†å¸ƒå¼é”"><a href="#åˆ†å¸ƒå¼é”" class="headerlink" title="åˆ†å¸ƒå¼é”"></a>åˆ†å¸ƒå¼é”</h3><blockquote>
<p>åˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆï¼š</p>
<ol>
<li>åŸºäºæ•°æ®åº“å®ç°åˆ†å¸ƒå¼é”</li>
<li>åŸºäºç¼“å­˜ redisç­‰</li>
<li>åŸºäºZookeeper</li>
</ol>
</blockquote>
<h5 id="redisé”"><a href="#redisé”" class="headerlink" title="redisé”"></a>redisé”</h5><blockquote>
<ol>
<li>é€šè¿‡setnxè®¾ç½®é”ï¼Œdel æ¥é‡Šæ”¾é”ï¼ˆsetnxè®¾ç½®keyä¸å­˜åœ¨çš„å€¼ï¼‰ä¼šæ­»é”ï¼Œå¯è®¾ç½®è¿‡æœŸæ—¶é—´(set users 10 nx ex 12ï¼Œä¸Šé”åŒæ—¶è®¾ç½®è¿‡æœŸæ—¶é—´)</li>
<li>é€šè¿‡UUIDé˜²æ­¢è¯¯åˆ é™¤ï¼Œé€šè¿‡è®¾ç½®keyçš„valueä¸ºuuidï¼Œé˜²æ­¢çº¿ç¨‹ä¹‹é—´äº’åˆ </li>
<li>é€šè¿‡luaä¿è¯åŸå­æ€§: æŸ¥è¯¢åˆ°åˆ é™¤</li>
</ol>
</blockquote>
<h3 id="æ–°ç‰¹æ€§"><a href="#æ–°ç‰¹æ€§" class="headerlink" title="æ–°ç‰¹æ€§"></a>æ–°ç‰¹æ€§</h3><h5 id="ACL-è®¿é—®æ§åˆ¶åˆ—è¡¨"><a href="#ACL-è®¿é—®æ§åˆ¶åˆ—è¡¨" class="headerlink" title="ACL(è®¿é—®æ§åˆ¶åˆ—è¡¨)"></a>ACL(è®¿é—®æ§åˆ¶åˆ—è¡¨)</h5><blockquote>
<p>å¯¹ç”¨æˆ·æƒé™è¿›è¡Œæ§åˆ¶</p>
</blockquote>
<h5 id="IOå¤šçº¿ç¨‹"><a href="#IOå¤šçº¿ç¨‹" class="headerlink" title="IOå¤šçº¿ç¨‹"></a>IOå¤šçº¿ç¨‹</h5><blockquote>
<ol>
<li>å®¢æˆ·ç«¯äº¤äº’éƒ¨åˆ†çš„ç½‘ç»œIOäº¤äº’å¤„ç†æ¨¡å—æ—¶å¤šçº¿ç¨‹ï¼Œè€Œæ‰§è¡Œå‘½ä»¤ä¾ç„¶æ—¶å•çº¿ç¨‹</li>
<li>ä¸»è¦ç”¨äºå¤„ç†ç½‘ç»œæ•°æ®è¯»å†™</li>
<li>éœ€è¦å¼€å¯é…ç½® io-threads-do-reads yes  io-threads 4</li>
</ol>
</blockquote>
<h5 id="å·¥å…·æ”¯æŒCluster"><a href="#å·¥å…·æ”¯æŒCluster" class="headerlink" title="å·¥å…·æ”¯æŒCluster"></a>å·¥å…·æ”¯æŒCluster</h5><blockquote>
<p>ä¹‹å‰è€ç‰ˆRedisæƒ³è¦æ­é›†ç¾¤éœ€è¦å•ç‹¬å®‰è£…rubyç¯å¢ƒï¼ŒRedis5å°†redis-trib.rbçš„åŠŸèƒ½é›†æˆåˆ°äº†redis-cliã€‚å¦å¤–redis-benchmarkå·¥å…·å¼€å§‹æ”¯æŒclusteræ¨¡å¼äº†ï¼Œé€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼å¯¹å¤šä¸ªåˆ†ç‰‡è¿›è¡Œå‹æµ‹</p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://boluokk.github.io/blog">ğŸ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://boluokk.github.io/blog/2023/05/23/Redis/">https://boluokk.github.io/blog/2023/05/23/Redis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://boluokk.github.io/blog" target="_blank">ğŸBlog</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://source.fomal.cc/img/default_cover_26.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/blog/2023/05/23/Lombok/" title="Lombok"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_50.webp" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">Lombok</div></div></a></div><div class="next-post pull-right"><a href="/blog/2023/05/23/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%8E%9F%E5%88%99/" title="è®¾è®¡æ¨¡å¼åŸåˆ™"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_25.webp" onerror="onerror=null;src='/blog/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">è®¾è®¡æ¨¡å¼åŸåˆ™</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/assets/img/avatar.jpg" onerror="this.onerror=null;this.src='/blog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ğŸ</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/blog/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">20</div></a><a href="/blog/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">0</div></a><a href="/blog/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/boluokk"><i class="fab fa-github"></i><span>Follow Me</span><!--i.faa-passing.animated(style="padding-left:20px;display:inline-block;vertical-align:middle;")--><!--  svg.icon(style="height:28px;width:28px;fill:currentColor;position:relative;top:5px")--><!--    use(xlink:href='#icon-xiaoqiche')--></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/boluokk" target="_blank" title="github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:1352955539@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content"></div><div id="welcome-info"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">å®‰è£…æ•™ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%87%86%E5%A4%87"><span class="toc-number">1.1.</span> <span class="toc-text">1ã€å‡†å¤‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E5%AE%89%E8%A3%85Redis"><span class="toc-number">1.2.</span> <span class="toc-text">2ã€å®‰è£…Redis</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E9%85%8D%E7%BD%AE"><span class="toc-number">1.3.</span> <span class="toc-text">3ã€é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%BC%93%E5%AD%98"><span class="toc-number">2.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯ç¼“å­˜?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%84%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">å¸¸è§„æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-number">4.</span> <span class="toc-text">å…¶ä»–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E7%BA%BF%E7%A8%8B-%E5%A4%9A%E8%B7%AFIO%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-number">5.</span> <span class="toc-text">å•çº¿ç¨‹+å¤šè·¯IOå¤ç”¨æŠ€æœ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%93%8D%E4%BD%9C"><span class="toc-number">6.</span> <span class="toc-text">æ•°æ®ç±»å‹æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#key%E6%93%8D%E4%BD%9C"><span class="toc-number">6.0.1.</span> <span class="toc-text">keyæ“ä½œ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">æ•°æ®ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#sring-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">7.0.1.</span> <span class="toc-text">sring å­—ç¬¦ä¸²</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#list-%E5%88%97%E8%A1%A8"><span class="toc-number">7.0.2.</span> <span class="toc-text">list åˆ—è¡¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#set-%E9%9B%86%E5%90%88"><span class="toc-number">7.0.3.</span> <span class="toc-text">set é›†åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#hash-%E5%93%88%E5%B8%8C"><span class="toc-number">7.0.4.</span> <span class="toc-text">hash å“ˆå¸Œ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#zset-%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-number">7.0.5.</span> <span class="toc-text">zset æœ‰åºé›†åˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Bitmaps"><span class="toc-number">7.0.6.</span> <span class="toc-text">Bitmaps</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HyperLogLog"><span class="toc-number">7.0.7.</span> <span class="toc-text">HyperLogLog</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Geospatial"><span class="toc-number">7.0.8.</span> <span class="toc-text">Geospatial</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">8.</span> <span class="toc-text">é…ç½®æ–‡ä»¶ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E4%B8%8E%E8%AE%A2%E9%98%85"><span class="toc-number">9.</span> <span class="toc-text">å‘å¸ƒä¸è®¢é˜…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Jedis"><span class="toc-number">10.</span> <span class="toc-text">Jedis</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">10.0.1.</span> <span class="toc-text">ç®€å•ä½¿ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD"><span class="toc-number">11.</span> <span class="toc-text">éªŒè¯ç åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E6%95%B4%E5%90%88redis"><span class="toc-number">12.</span> <span class="toc-text">SpringBootæ•´åˆredis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%92%8C%E9%94%81"><span class="toc-number">13.</span> <span class="toc-text">äº‹åŠ¡å’Œé”</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E5%86%B2%E7%AA%81"><span class="toc-number">13.0.1.</span> <span class="toc-text">äº‹åŠ¡å†²çª</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Redis%E4%BA%8B%E5%8A%A1%E4%B8%89%E7%89%B9%E6%80%A7%F0%9F%8E%88%F0%9F%8E%88%F0%9F%8E%88"><span class="toc-number">13.0.2.</span> <span class="toc-text">Redisäº‹åŠ¡ä¸‰ç‰¹æ€§ğŸˆğŸˆğŸˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">13.0.3.</span> <span class="toc-text">æ¡ˆä¾‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98"><span class="toc-number">14.</span> <span class="toc-text">å¤šçº¿ç¨‹å‡ºç°é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%85%E5%8D%96"><span class="toc-number">14.0.1.</span> <span class="toc-text">è¶…å–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E8%B6%85%E6%97%B6"><span class="toc-number">14.0.2.</span> <span class="toc-text">è¿æ¥è¶…æ—¶</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">15.</span> <span class="toc-text">æŒä¹…åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RDB"><span class="toc-number">15.0.1.</span> <span class="toc-text">RDB</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#AOF"><span class="toc-number">15.0.2.</span> <span class="toc-text">AOF</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6"><span class="toc-number">16.</span> <span class="toc-text">ä¸»ä»å¤åˆ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA"><span class="toc-number">16.0.1.</span> <span class="toc-text">æ­å»º</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E4%B8%BB%E4%B8%A4%E4%BB%8E"><span class="toc-number">16.0.2.</span> <span class="toc-text">ä¸€ä¸»ä¸¤ä»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%96%AA%E7%81%AB%E7%9B%B8%E4%BC%A0"><span class="toc-number">16.0.3.</span> <span class="toc-text">è–ªç«ç›¸ä¼ </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8D%E5%AE%A2%E4%B8%BA%E4%B8%BB"><span class="toc-number">16.0.4.</span> <span class="toc-text">åå®¢ä¸ºä¸»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F"><span class="toc-number">17.</span> <span class="toc-text">å“¨å…µæ¨¡å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4"><span class="toc-number">18.</span> <span class="toc-text">é›†ç¾¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-number">19.</span> <span class="toc-text">åº”ç”¨é—®é¢˜è§£å†³</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F"><span class="toc-number">19.0.1.</span> <span class="toc-text">ç¼“å­˜ç©¿é€</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E5%87%BB%E7%A9%BF"><span class="toc-number">19.0.2.</span> <span class="toc-text">ç¼“å­˜å‡»ç©¿</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%93%E5%AD%98%E9%9B%AA%E5%B4%A9"><span class="toc-number">19.0.3.</span> <span class="toc-text">ç¼“å­˜é›ªå´©</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81"><span class="toc-number">20.</span> <span class="toc-text">åˆ†å¸ƒå¼é”</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#redis%E9%94%81"><span class="toc-number">20.0.1.</span> <span class="toc-text">redisé”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">21.</span> <span class="toc-text">æ–°ç‰¹æ€§</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ACL-%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8"><span class="toc-number">21.0.1.</span> <span class="toc-text">ACL(è®¿é—®æ§åˆ¶åˆ—è¡¨)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IO%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">21.0.2.</span> <span class="toc-text">IOå¤šçº¿ç¨‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E6%94%AF%E6%8C%81Cluster"><span class="toc-number">21.0.3.</span> <span class="toc-text">å·¥å…·æ”¯æŒCluster</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/11/16/RabbitMQ/" title="RabbitMQ"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_17.webp" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="RabbitMQ"/></a><div class="content"><a class="title" href="/blog/2023/11/16/RabbitMQ/" title="RabbitMQ">RabbitMQ</a><time datetime="2023-11-16T14:11:08.000Z" title="å‘è¡¨äº 2023-11-16 22:11:08">2023-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/11/16/Docker%E6%A1%8C%E9%9D%A2%E7%AB%AF%E9%97%AE%E9%A2%98/" title="Dockeræ¡Œé¢ç«¯é—®é¢˜"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_16.webp" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Dockeræ¡Œé¢ç«¯é—®é¢˜"/></a><div class="content"><a class="title" href="/blog/2023/11/16/Docker%E6%A1%8C%E9%9D%A2%E7%AB%AF%E9%97%AE%E9%A2%98/" title="Dockeræ¡Œé¢ç«¯é—®é¢˜">Dockeræ¡Œé¢ç«¯é—®é¢˜</a><time datetime="2023-11-16T13:11:02.000Z" title="å‘è¡¨äº 2023-11-16 21:11:02">2023-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/21/JVM/" title="JVM"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_16.webp" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="JVM"/></a><div class="content"><a class="title" href="/blog/2023/09/21/JVM/" title="JVM">JVM</a><time datetime="2023-09-21T10:09:32.000Z" title="å‘è¡¨äº 2023-09-21 18:09:32">2023-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/17/node%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" title="nodeå¤šç‰ˆæœ¬ç®¡ç†"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_28.webp" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="nodeå¤šç‰ˆæœ¬ç®¡ç†"/></a><div class="content"><a class="title" href="/blog/2023/09/17/node%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" title="nodeå¤šç‰ˆæœ¬ç®¡ç†">nodeå¤šç‰ˆæœ¬ç®¡ç†</a><time datetime="2023-09-17T06:09:30.000Z" title="å‘è¡¨äº 2023-09-17 14:09:30">2023-09-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/blog/2023/09/16/Spring%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84/" title="Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://source.fomal.cc/img/default_cover_42.webp" onerror="this.onerror=null;this.src='/blog/img/404.jpg'" alt="Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„"/></a><div class="content"><a class="title" href="/blog/2023/09/16/Spring%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E7%9A%84/" title="Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„">Springæ˜¯å¦‚ä½•è§£å†³å¾ªç¯ä¾èµ–çš„</a><time datetime="2023-09-16T12:09:34.000Z" title="å‘è¡¨äº 2023-09-16 20:09:34">2023-09-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/blog/js/utils.js"></script><script src="/blog/js/main.js"></script><script src="/blog/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script defer data-pjax src="https://boluokk.github.io/blog/js/cat.js"></script><script defer src="https://boluokk.github.io/blog/js/cursor.js"></script><script async data-pjax src="https://boluokk.github.io/blog/js/txmap.js"></script><canvas id="universe"></canvas><script defer src="https://boluokk.github.io/blog/js/universe.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="ğŸ,ğŸ‰ğŸˆ,ğŸ‡ğŸ¥¥,ğŸ¥,ğŸŠğŸ‹,ğŸ¥ğŸŠğŸ‹ğŸŒ" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="åšå®¢æ¡†æ¶ä¸ºHexo_v5.4.0" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="ä¸»é¢˜ç‰ˆæœ¬Butterfly_v4.2.2" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" data-title="æœ¬ç«™ä½¿ç”¨JsDelivrä¸ºé™æ€èµ„æºæä¾›CDNåŠ é€Ÿ" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="æœ¬ç«™é¡¹ç›®ç”±Githubæ‰˜ç®¡" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯" title=""><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('å·²æŒ‚è½½butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/blog/js/footer-username.js"></script><!-- hexo injector body_end end --></body></html>